


# Пример использования виртуальных функций
```cpp
#include <iostream>
#include <vector>

class Base {
 public:
  virtual void do_something() = 0;
  virtual ~Base() = default;
};

class Derv1 : public Base {
 public:
  void do_something() override { std::cout << "Derv1 do_something()\n"; }
};

class Derv2 : public Derv1 {
 public:
  void do_something() override { std::cout << "Derv2 do_something()\n"; }
};

int main() {
  std::vector<Base*> my_vec;  // Создаём вектор из Родителя
  my_vec.push_back(new Derv1);  // Добавляем Наследника_1 и Наследника 2
  my_vec.push_back(new Derv1);
  my_vec.push_back(new Derv2);

  for (size_t i = 0; i < my_vec.size(); ++i) {
    my_vec[i]->do_something();  // Вызываем метод от каждого наследника и
  }

  // Очицщаем память
  for (size_t i = 0; i < my_vec.size(); ++i) {
    delete my_vec[i];
  }

  return 0;
}
```

# Пример про виртуальные таблицы (vtable)

```cpp
#include <iostream>
#include <vector>

class Base {
 public:
  virtual void do_something() = 0;
  virtual int inherit_num() = 0;
  virtual ~Base() = default;
};

class Derv1 : public Base {
 public:
  int d1;
  void do_something() override { std::cout << "Derv1 do_something()\n"; }
  int inherit_num() override { return 1; };
};

class Derv2 : public Derv1 {
 public:
  int d2;
  void do_something() override { std::cout << "Derv2 do_something()\n"; }
  int inherit_num() override { return 2; };
};

int main() {
  Derv1 d1;
  Derv2 d2;

  d1.do_something();
  d2.do_something();

  return 0;
}
```
	![[Pasted image 20231125010820.png]]
```
-exec info vtbl d1
-exec info vtbl *this
```
